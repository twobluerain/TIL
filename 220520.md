인터넷 프로그래밍 개요
\1. WWW(World Wide Web)
(1) 웹 개요
www 역사
\- www인 월드와이드웹(world wide web)은 유럽입자물리연구소(CERN)의
팀버너스 리(Tim Berners Lee)가 제안하여 개발(1989년)
\- 전세계 인터넷 기반에서 하이퍼텍스트(hypertext)기반 HTML언어로 표현
\- 문서를 HTTP 통신 프로토콜을 사용하여 전송
\- 하이퍼텍스트는 정보를 서로 연결하는 하이퍼링크에 의하여 구성된 정보
를 말한다.

클라이언트 서버 구조
\- 웹은 클라이언트/서버 구조로서 웹브라우저의 클라이언트가 자료를 요청
(request)하면 서버는 요청에 응답(response)하여 클라이언트 웹브라우저에
정보가 전달된다.

웹 브라우저
\- 웹의 정보를 쉽게 참조할 수 있는 응용프로그램이다.
\- 웹 정보를 탐색하는 프로그램이다.
\- HTML 문서를 읽어 화면에 표시하는 역할을 한다

서버의 역할
\- 웹 서버는 HTTP 통신 프로토콜을 사용하여 클라이언트의 요청에 응답하는
프로그램이다.
\- 서버역할을 수행하기 위해 항상 실행되어 있어야 하며, 요청한 페이지나
결과를 사용자에게 제공한다.
\- 아파치(Apache), 톰캣(Tomcat), IIS(Internet Information Server)

정적페이지와 동적페이지
\- 정적페이지는 html, 다양한 미디어의 자원파일, 이미지등이며 모든
클라이언트의 동일한 요청에 대해 동일한 결과를 가져온다.
\- 동적페이지는 클라이언트 요청에 대해 다른 결과를 서비스한다.
\- 동적페이지를 구성하기 위해 비즈니스 로직처리와 데이터베이스 참조처리
등 인터넷 서버 프로그램이 필요하다.

---

인터넷 프로그래밍
(1) 인터넷 클라이언트 프로그래밍(Front)
■ HTML, JavaScript, CSS
\- 브라우저내에 컴파일이 내장되어 있다.

\- 출력 결과를 보여주는 태그로 구성 (HTML 4.0 = DHTML)
\- 데이터를 일정한 형식으로 출력하는 기능을 주로 가지고 있다.
\- XML은 데이터 표현과 관련해서 많은 기능을 가지고 있다.

\- 2014년 HTML5 표준화 지정, HTML5의 기능이 구현된 브러우저는 Chrom,
Safari, Opera, IE11 등이다.

\- JavaScript, VBScript: 웹페이지상에서 클라이언트(브러우저)의 이벤트
(키보드 입력, 마우스 클릭)를 받음

\- CSS(Cascading Style Sheet): HTML은 출력되는 데이터의 구조를 목적으로
하지만, CSS는 그 출력되는 태그를 더욱 화려하게 꾸미는 역할을 함

(2) 인터넷 서버 프로그래밍(Backend)
\- 서버에 설치된 서블릿 컨테이너(JSP엔진)에서 실행
\- JSP엔진으로는 tomcat, resin, JRun 등이 있다.
\- 자료를 처리, 저장, 검색하는 기능등을 처리하려면 DBMS(Oracle, MySQL)
가 필요하며, 이 데이터베이스에 접속하기위해서 서버스크립트
(JSP, PHP, ASP.NET)가 필요하다.

\- JSP: SUN의 서버쪽 스크립트 기술, 모든 운영체제 지원, JAVA 기반,
Servlet Container(AP서버)를 설치해야 실행 할 수 있습니다.

\- ASP.NET: MS의 스크립트 기술, MS 운영체제만 지원, C# 기반,
윈도우에 웹서버가 기본적으로 설치되어 있으며, .NET Framework를
사용하여 개발한다.

\- ASP: MS의 서버쪽 스크립트 기술, MS 운영체제만 지원, Visual Basic 기반,
IIS의 asp.dll의 처리과정을 거쳐 HTML로 결과를 생성함, 별다른 서버설치가
필요 없음, 유지보수, 수정이 매우 어렵다.

\- PHP: 서버쪽 공개 스크립트 기술, 모든 운영체제 지원, C 기반,
배우기 쉽고, 소규모 프로젝트에서 많이 사용된다.

http 프로토콜을 이용한 요청과 응답의 서버환경

![img](https://blog.kakaocdn.net/dn/bFCtyt/btrCBDnJirx/GTAsaLdVM6DdjAz9YppYYK/img.png)

\- Servelet Container 변환 위치
Tomcat -> work ->Catalina -> localhost -> jsptest -> org -> apache -> jsp

![img](https://blog.kakaocdn.net/dn/spB2c/btrCDIuZwC8/VsiyUwV5Bd8WQb8z6OxB7K/img.png)

웹서버는
브라우저(클라이언트)의 요청을 받아
(http 프로토콜을 이용해)
HTML이나 이미지같은 정적인 페이지를
브라우저(클라이언트)에게 응답
웹 서버 자체적으로 처리할 수 없는
jsp servlet같은 동적인 페이지를
컨테이너로 넘겨서 처리
브라우저(클라이언트)로 응답
정적/ 동적 공통적으로
데이터 베이스 관리 시스템에서
가져올 값은 가져온다.

---

JSP 개요
(1) 서블릿의 이해
\- Java로 만든 최초의 web관련 언어다.

\1) 초창기 CGI의 인터넷 구성
\- 메모리 낭비가 매우 심하다.
(접속자 별로 메모리 공유가 안되는 프로세스가 발생한다.)

\- 인터넷 사용량(Traffic)의 증가로 서서히 사라짐
(CGI : C, VC++, Perl 언어 사용, CGI를 호출하는 접속자의 수 만큼 Process가 생성됨)

\2) 서블릿을 이용한 구성
\- CGI에 비해 Thread 기술을 이용하여 동시접속자로 인한 과부하를 해소됨.
\- 자바 기반 Web Application 구축 기술중에 가장 빠른 속도를 가지고 있다.
\- Servlet의 단점은 디자인부분과 혼합하여 작업하기가 매우 어렵다.
\- 확장자가 .java로 개발되어 .class 로 배포된다.(jsp파일은 확장자가 \*.jsp이다.)

\3) JSP를 이용한 구성
\- Servlet의 불편한 디자인 부분을 좀더 간결하게 제작하도록 개선된 서버 프로그램
\- 하나의 JSP페이지에는 HTML, JavaScript, Java Code등이 혼합되어 존재하게 된다.
\- 디자이너가 작업한 내용이 JSP 페이지로 변경된다.
\- 대형 사이트의 경우 유지보수 및 기능 확장이 어려워 나중에 JSP, Beans로 분리
개발한다.

브라우저 <------ 응답 <----- HTML <----- JSP --> Servlet으로 변환  
 \------------------------
_.jsp --> _.java --> \*.class

\4) JSP + Beans(JAVA class) 를 이용한 구성
\- JSP는 사이트 구축시 디자이너가 작업하게 되며, 일부 jsp 개발자가 코드
작업을 한다. 디자인쪽 비중이 매우 크다.
\- BEANS는 콤포넌트 자바 개발자가 Business Logic(Process Logic)를 구현
DB관련 INSERT, UPDATE, DELETE, SELECT등

IE <---- 응답 <--- HTML <--- JSP --> Servlet으로 변환 -> JSP Beans
\---------------------
_.jsp --> _.java --> \*.class

---

JSP 기초문법

\- WEB 환경에서 JAVA를 이용한 DBMS 접근을 처리 .

\- Java Logic 처리를 구현

\- JAVA를 기반으로하는 문법

\- JSP 고유의 태그가 존재

\- JSP의 출력 결과를 HTML과 CSS로 편집하여 출력

\1. 스크립틀릿의 이해

\- 일반적인 java 코드가 쓰임: <% ... JAVA 코드 명시 ... %>

![img](https://blog.kakaocdn.net/dn/CSv4p/btrCBBDzWR5/2mKpnUmMTTi8MLHMNtkIj1/img.png)

<%@ page language="java" contentType="text/html; charset=UTF-8"

pageEncoding="UTF-8"%>

<%

String name ="왕눈이";

int kuk = 90;

int eng = 95;

int tot = kuk + eng;

int avg = tot/2;

%>

<!DOCTYPE html>

<html>

<head>

<meta charset="UTF-8">

<title>Insert title here</title>

</head>

<body>

<h1>성적표</h1>

<div style='font-size:24px'>

----------------------<br>

성명 <%out.println(name);%><br>

국어 <%out.println(kuk);%><br>

영어 <%out.println(eng);%><br>

총점 <%=tot%><br>

평점 <%=avg%><br>

</div>

<%

System.out.println(">>>>>>>> name:" + name);

%>

</body>

</html>

\2. 선언문(특별한 경우만 사용, 빈즈로 대체하여 사용함으로 권장하지 않음)

\- 메소드(함수) 선언: <%! ...JAVA 메소드... %>

int tot = tot(kuk, eng, mat);

![img](https://blog.kakaocdn.net/dn/0iwjw/btrCEdBAqzq/XKkkFrmk0bcDKLczJKZrOk/img.png)

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%!public int tot(int kuk, int eng, int mat){ return kuk+eng+mat; } public int avg(int tot){ return tot/3; }%><%String name = "아로미";int kuk = 90;int eng = 85;int mat = 100;int tot = tot(kuk, eng, mat);int avg = avg(tot);%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body><h1>성적표</h1><ul style='font-size:24px'><li> 성명 : <%=name %><li> 국어 : <%=kuk %><li> 영어 : <%=eng %><li> 수학 : <%=mat %><li> 총점 : <%=tot %><li> 평균 : <%=avg %></ul></body></html>

\3. 표현식(Expression)

\- 단순 출력 기능.

\- <% System.out.print(hap(10, 20)); %> 콘솔에 출력

\- <% out.print(hap(10, 20)); %> JSP 출력
\- <%=hap(10, 20)%> JSP 출력, 문장 종결자(';')을 사용할 수 없고,
오로지 하나의 값만 출력

\4. 주석

\- <%

​ //

​ /_...~~~..._/

%>

![img](https://blog.kakaocdn.net/dn/bj6ZOh/btrCCGxLvJX/zPaAEyB2kxKpvq2JNw54V0/img.png)![img](https://blog.kakaocdn.net/dn/m8WQL/btrCFKsblYl/QcKy4c7bLwyxQGQuB6Rzy0/img.png)

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%! String declaration = "Declaration"; public String decMethod(){ return declaration; }%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body> <h1>Script Example</h1><% String scriptlet = "Scriptlet"; String comment = "Comment"; out.println("내장 객체를 이용한 출력 : " + declaration + "<p/>");%> 선언문의 출력 1 : <%=declaration %><p/> 선언문의 출력 2 : <%=decMethod() %><p/> 스크립트의 출력 : <%=scriptlet %><p/> <!-- JSP 주석 부분 --> <!-- JSP 주석1 : <%=comment%> --> <p/> <%-- JSP 주석2 : <%=comment%> --%> // 이렇게 해야 안 보인다. <% /_주석(여러줄 주석)_/ // 한 줄 주석 %> </body></html>

\5. [실습] 이미지 목록을 배열에 저장한 후 출력하는 스크립트를 작성

\- for문을 이용할 것.

\- 다운받은 tulip 압축파일을 tulip폴더에 압축을 풀어 WebContent로 저장후 실행

![img](https://blog.kakaocdn.net/dn/bTvbDu/btrCB6pUgu5/hbhSJYCNEO2yietRfowRKk/img.png)

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> <% String root = request.getContextPath(); String[] images = { "tu01.jpg", "tu02.jpg", "tu03.jpg", "tu04.jpg", "tu05.jpg", "tu06.jpg", "tu07.jpg", "tu08.jpg", "tu09.jpg", "tu10.jpg"};%> <!DOCTYPE html><html><style> img{ width : 200px; height : 160px; border : 0; }</style><head><meta charset="UTF-8"><title>Insert title here</title></head><body> <h1>튤립 축제</h1><br><% for(int i=0; i<images.length; i++){ %> <a href='<%=root%>/tulip/<%=images[i]%>'> <img src='<%=root%>/tulip/<%=images[i]%>'> </a> <% } %> </body></html>

---

JSP 지시자(Directive), 액션태그

\1. JSP 지시자(Directive)
\- 지시자는 클라이언트의 요청에 JSP 페이지가 실행이 될 때 필요한 정보를
JSP 컨테이너에게 알리는 역할한다.
\- 지시자는 태그 안에서 @으로 시작하며, 3가지 종류가 있다.
page, include, taglib

(1)page 지시자
\- jsp페이지에서 지원되는 속성들을 정의하는 것들이다.
\- jsp페이지에서 JSP컨테이너에게 해당 페이지를 어떻게 처리할 것인가에
대한 페이지 정보를 알려준다.

info : 페이지설명, jsp 페이지 제목을 붙이는 것과 같다.
language : Jsp페이지의 스크립트 언어지정 기본값은 Java
contentType: jsp의 출력 형식 지정, 문자 셋을 지정합니다.

\- 형식: contentType="text/html; charset=UTF-8"

<%@ page contentType="text/html; charset=UTF-8" %>

\- JSP처리 결과가 HTML임으로 MIME Type을 'text/html'과 문자 코드(UTF-8)
선언.

\- MIME Type: 브러우저가 출력하는 데이터의 종류를 나타낸 코드값,

예) image/jpg는 이미지가 출력됨

\- HTML 태그의 META태그도 일치시켜야함(브러우저용).

 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

 <meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">

import: 패키지의 import, 중복 사용가능

자바에서 패키지를 사용하겠다고 선언하는 것과 같다

예) <%@ page import="java.util.\*" %>

![img](https://blog.kakaocdn.net/dn/ZKpYm/btrCGbp263Q/sYSZXv7TgLUVbJqKRwb211/img.png)

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%@ page import="java.util.Date" %><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title><style type = "text/css"> div{ font-size:36px; color:#AAEC8E; background-color:#EAA3A3; }</style></head><body> <div> <% Date date = new Date(); out.print(date.toLocaleString()); %> </div></body></html>

![img](https://blog.kakaocdn.net/dn/bRihia/btrCEenzy63/GIc85PKiShqEZr0CKmqKlk/img.png)

\- 천단위마다 ','출력

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%@ page import="java.text.DecimalFormat"%><%! public String comma(long val) { DecimalFormat df = new DecimalFormat("W ###,###,### 원"); String str = df.format(val); return str;} %><!DOCTYPE html><html><head><style type = "text/css"> div{ font-size:36px; color:#AAEC8E; background-color:#EAA3A3; }</style><meta charset="UTF-8"><title>Insert title here</title></head><body> <h1>6월 급여 명세서</h1> <div> 본봉 : <%=comma(1800000) %><br> 수당 : <%=comma(200000) %><br> <span style='color:#fff122'> 세금 : <%=comma(100000) %><br> </span><br> 실수령액 : <%=comma(1900000) %><br> <br><span style='color:#00ff00'>수고하셨습니다.></span> </div></body></html>

pageEncoding: jsp1.2에 추가된 규약으로 jsp페이지의 문자셋 형식을 지정

<%@ page pageEncoding="UTF-8" contentType="text/html" %>

(2) include 지시자
\- 여러 jsp페이지에서 공통적으로 포함하는 내용이 있을 때 이러한 내용을
매번 입력하지 않고 파일에 저장한 후 JSP파일에 포함해서 실행한다.

\- 처리 결과가 합쳐지는 것이 아니라 파일의 소스가 하나의 파일에 합쳐진
다음 실행된다.

list.jsp 소스 + ssi.jsp 소스 = jsp 통합 큰 소스 ==> 실행

\-------------------------------------------------------------

\- 사용 방법

<%@ include file="Local URL" %>

<%@ include file="./ssi.jsp" %>

![img](https://blog.kakaocdn.net/dn/M80AI/btrCEdCimvc/qmFtNJV3C2m8ep1dSvfAfK/img.png)

| top.jsp                                                                                                                                                                                                                       | bottom.jsp                                                                                                                                                                                                                                   | directive.jsp                                                                                                                                                                                                  |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body> include 지시자의 TOP 부분입니다.<br><hr> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%@ page import = "java.util.Date" %><% Date date = new Date(); %><hr>include 지시자의 Bottom 부분입니다.<p/><%=date.toLocaleString()%> </body></html> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><h1>Directive Example</h1><%@ include file="top.jsp"%>include 지시자의 Body 부분입니다.<%@ include file ="bottom.jsp" %> |

---

\2. 액션태그
\- JSP 문법이다.
\- 액션태그의 종류는 include, forward, useBean, setProperty, getProperty
등이 있다.
useBean, setProperty, getProperty
\- 자바빈즈(JavaBeans)와 통신을 위해서 구현한 액션태그이다.

forward
\- 다른페이지로 이동할 때 사용하는 태그이다.

![img](https://blog.kakaocdn.net/dn/bol8z5/btrCGVU6Zvj/9zT6sekvvip4cCGfEo4ukk/img.png)

![img](https://blog.kakaocdn.net/dn/njx4P/btrCHCHqovL/TGCNcH1XZpoukBA6TFJWt0/img.png)![img](https://blog.kakaocdn.net/dn/WEvIA/btrCHCAEdsu/RA4gLY4QqGQsSD8rUDu2V1/img.png)

| forwardTag1.jsp                                                                                                                                                                                                                                                                                                                                                                                        | forwardTag1_1.jsp                                                                                                                                                                                                                                                                                                                                               | forwardTag1_2.jsp                                                                                                                                                                                                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body><h1>Forward Tag Example1</h1><form method=post action="forwardTag1_1.jsp">아이디 : <input name="id"><p/>패스워드 : <input type="password" name="pwd"><p/><input type="submit" value="보내기"></form></body></html> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> <% request.setCharacterEncoding("UTF-8");%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body><h1>Forward Tag Example1</h1>Forward Tag의 포워딩 되기 전의 페이지입니다.<jsp:forward page="forwardTag1_2.jsp" /></body></html> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%String id = request.getParameter("id");String pwd = request.getParameter("pwd");%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body><h1>Forward Tag Example1</h1>당신의 아이디는<b><%=id%></b>이고<p/>패스워드는 <b><%=pwd%></b> 입니다.</body></html> |

---

Include 액션태그
\- <%@ include file="./ssi.jsp" %>

ssi.jsp의 JSP 소스가 그대로 복사되어 원본 파일에 추가됨.

\- <jsp:include page="/menu/top.jsp" flush="false"/>

top.jsp가 처리가 되고 나서 HTML로 변경된 결과가 포함.

![img](https://blog.kakaocdn.net/dn/v0yzX/btrCHqURztu/iEItBtdBSWJvi5Be3Esssk/img.png)

\- include 액션태그는 include 지시자 처럼 다른페이지를 현재 페이지에 포함시킬 수
있는 기능을 가진다.

\- include 액션태그는 include 지시자와 다르게 포함시킬 페이지의 처리결과를 포함한다.
\- include 액션태그의 flush 속성은 포함될 페이지로 이동할 때 현재 페이지가 지금까지
출력버퍼에 저장한 결과를 어떻게 처리할 것인가를 결정한다.
\- flush = 'true' 이면 포함할 페이지의 내용을 삽입하기 이전에 현재 페이지가 지금까지
버퍼에 저장한 내용을 출력한다.

![img](https://blog.kakaocdn.net/dn/xIkJ6/btrCGWNzJyk/sesMJkKSQZCrWcB1ZC5Vv0/img.png)

Menu 페이지 제작
\- menu는 jsp:include Action 태그를 사용해야 페이지간 간섭을 피할 수 있다.

\- include 지시자를 사용하면 같은 변수가 2번이상 선언될 경우 소스 충돌로

에러 발생.

\- menu Layout

──────────────────────

​ 상단 주메뉴

​ top.jsp  
 ──────────────────────

​

​

​ 내 용

​

​

─────────────────────

​ 하단 메뉴

​ bottom.jsp

─────────────────────

\1. 페이지를 분할하지 않은 통합 소스

\2. 상단 메뉴의 구성

\3. 하단 메뉴의 구성

![img](https://blog.kakaocdn.net/dn/bbA7kM/btrCEeaNM1M/EkW2qVmYYNLfo9lBDHfiEk/img.png)

| index.html                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | top.jsp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | index.jsp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <!DOCTYPE html><html lang="en"><head> <title>Bootstrap Example</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script></head><body> <!--상단메뉴--><div class="container"> <div class="page-header row"> <div class="col-sm-4"> <img src="images/img_chania.jpg" class="img-responsive img-thumbnail" alt="Cinque Terre" > </div> <div class="col-sm-8"><h1>Homepage</h1></div> </div> <ul class="nav nav-tabs"> <li class="active"><a href="#">Home</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu 1 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="#">Submenu 1-1</a></li> <li><a href="#">Submenu 1-2</a></li> <li><a href="#">Submenu 1-3</a></li> </ul> </li> <li><a href="#">Menu 2</a></li> <li><a href="#">Menu 3</a></li> </ul> </div> <!--내용--> <div class="container"> <div class="row"> <div class="col-sm-4"> <h3>Column 1</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> <div class="col-sm-4"> <h3>Column 2</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> <div class="col-sm-4"> <h3>Column 3</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> </div></div></body></html> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><% String root = request.getContextPath(); %><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script></head><body> <div class="container"> <div class="page-header row"> <div class="col-sm-4"> <img src="<%=root %>/images/img_chania.jpg" class="img-responsive img-thumbnail" alt="Cinque Terre" > </div> <div class="col-sm-8"><h1>Homepage</h1></div> </div> <ul class="nav nav-tabs"> <li class="active"><a href="<%=root%>/index.jsp">Home</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">게시판<span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="<%=root%>/bbs/createForm.jsp">생성</a></li> <li><a href="<%=root%>/bbs/list.jsp">목록</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">메모<span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="<%=root%>/memo/createForm.jsp">생성</a></li> <li><a href="<%=root%>/memo/list.jsp">목록</a></li> </ul> </li> <li><a href="#">Menu 2</a></li> <li><a href="#">Menu 3</a></li> </ul> </div></body></html> | <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Insert title here</title></head><body><jsp:include page="/menu/top.jsp"></jsp:include> <div class="container"> <div class="row"> <div class="col-sm-4"> <h3>Column 1</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> <div class="col-sm-4"> <h3>Column 2</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> <div class="col-sm-4"> <h3>Column 3</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p> </div> </div></div></body></html> |

---

JSP 내부객체

![img](https://blog.kakaocdn.net/dn/cxC1mQ/btrCHCOznLm/XO7s3iXLN2xqfUeVKrqVV1/img.png)

\1. JSP 내부객체의 이해

\- 개발자가 객체를 생성하지 않아도 jsp페이지가 서블릿 컨테이너(Tomcat)로

로딩되면 Tomcat등 서버가 자동으로 생성하는 객체이다.

\- 개발자는 반복적인 작업을 줄이고 필요한 작업만 할수 있다.

\- jsp페이지는 Web서버 및 Servlet Container라고 하는 복잡한 환경에서 실행이

되기 때문에, 실행중에 여러가지 상태정보를 가지고 있어야 하는데,

이런 경우에 사용되는 객체들이 내부 객체들이다.

\- 내부 객체로 인해 개발자는 좀더 쉽게 JSP 프로그래밍이 가능함.

(1) request, response, out
\- 클라이언트로 부터 jsp 페이지의 호출에 의해서 전달되는 데이터 요청과 응답,
출력의 역할을 한다.
■ request 내부 객체

![img](https://blog.kakaocdn.net/dn/KgkVI/btrCHoXghJz/uK1WuWvjOutjclvc6wd2G1/img.png)

\- javax.servlet.http.HttpServletRequest Interface를 Tomcat등 서버가 구현한 객체,
자동화된 객체, 개발자는 사용만함.
\- <FORM>에서 입력되어 브러우저가 전송한 데이터를 Tomcat 서버의 JSP에서
처리할수 있도록 객체로 가져오는 역할을 한다
\- ? : 파라메터를 보낸다는 뜻
\- &: 접속자가 보내는 값이 2개 이상인 경우

[실행결과]
http://localhost:8000/jsptest/request.jsp?pay=3000000&name=홍길동&java=100&jsp=90&spring=90

\1. http://localhost:8000/jsptest/request.jsp
\2. /jsptest/request.jsp
\3. 사용자로부터 입력을 받을 경우
급여: 3000000
\4. 사용자로부터 입력값이 여러개인 경우
급여: 3000000
성명: 홍길동
JAVA: 100
JSP: 90
Spring: 90
총점: 280
평균: 93

![img](https://blog.kakaocdn.net/dn/N3cvI/btrCHcCXr2B/ABGnd2AzavxRHXE1AWwsKK/img.png)

| request.jsp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <%@ page contentType="text/html; charset=UTF-8" %> <!DOCTYPE html> <html> <head> <title>homepage</title> <meta charset="utf-8"> </head> <body> <jsp:include page="/menu/top.jsp"/> <div class="container"> 1. <%=request.getRequestURL() %><br> 2. <%=request.getRequestURI() %><br> 3. 사용자로부터 입력을 받는 경우 <br> 급여 : <%=request.getParameter("pay") %><br> 성명 : <%=request.getParameter("name") %><br> <% int java = Integer.parseInt(request.getParameter("java")); int jsp = Integer.parseInt(request.getParameter("jsp")); int spring = Integer.parseInt(request.getParameter("spring")); int tot = java + jsp + spring ; int avg = tot / 3; %> JAVA : <%=java %><br> JSP : <%=jsp %><br> SPRING : <%=spring %><br> 총정 : <%=tot %><br> 평균 : <%=avg %><br> </form> </div> </body> </html> |

---

\- 접속한 클라이언트에 대한 정보도 알 수 있다.
\- 웹브라우저와 웹 서버의 정보 반환

※ ip가 0:0:0:0:0:0:0:1 일때 해결
메뉴 Run -> Run Configurations -> Arguments 탭 ->

​ -Djava.net.preferIPv4Stack=true 추가

![img](https://blog.kakaocdn.net/dn/yDY67/btrCIl6ApxH/BoGX3oozgG0AyNgVn5kOjk/img.png)

<%@ page contentType="text/html;charset=UTF-8"%><%String protocol = request.getProtocol();String serverName = request.getServerName();int serverPort = request.getServerPort();String remoteAddr = request.getRemoteAddr();String remoteHost = request.getRemoteHost();String method = request.getMethod();StringBuffer requestURL = request.getRequestURL();String requestURI = request.getRequestURI();String useBrowser = request.getHeader("User-Agent");String fileType = request.getHeader("Accept");%><h1>Request Example2</h1>프로토콜 :<%=protocol%><p />서버의 이름 :<%=serverName%><p />서버의 포트 번호 :<%=serverPort%><p />사용자 컴퓨터의 주소 :<%=remoteAddr%><p />사용자 컴퓨터의 이름 :<%=remoteHost%><p />사용 method :<%=method%><p />요청 경로(URL) :<%=requestURL%><p />요청 경로(URI) :<%=requestURI%><p />현재 사용하는 브라우저 :<%=useBrowser%><p />브라우저가 지원하는 file의 type :<%=fileType%><p />

---

response내부 객체

\- javax.servlet.http.HttpServletResponse Interface를 Tomcat등

서버가 구현한 객체, 자동화된 객체, 개발자는 사용만함.

\- 처리 결과를 클라이언트(웹 브러우저)에게 출력할 목적을 가지고 있다.

\- out 객체는 response 객체로부터 생성한다.

\- sendRedirect(): 데이터 처리를 한후 특정 페이지로 자동으로 주소 이동.

요청자체가 새로운 요청으로 바뀐다.
\- 기상청으로 이동: [http://www.kma.go.kr](http://www.kma.go.kr/)

<%@ page contentType="text/html; charset=UTF-8" %> <!DOCTYPE html><html><head> <title>homepage</title> <meta charset="utf-8"></head><body><% response.sendRedirect("[http://www.kma.go.kr](http://www.kma.go.kr/)");%></body></html>

---

out 내부 객체
\- jsp페이지 결과를 클라이언트에 전송해 주는 출력 스트림을 나타낸다.
\- javax.servlet.jsp.JspWriter Class의 객체

\- out 객체는 response객체에서 생성된다.

\- out.print("접속에 성공했습니다.")

HTML이 모두 한줄로 생성됨, 소스 분석 어려움

\- out.println("접속에 성공했습니다.")

호출될 때마다 HTML코드를 생성하고 새로운 라인으로 이동함.

\- System.out.print(), System.out.println()은 디버깅 정보를 콘솔창에

출력하는 용도로 사용

(변수의 변화를 추적하기 위한 용도, 관리, 에러 수정목적)

![img](https://blog.kakaocdn.net/dn/eGqBxi/btrCDCJxG6s/YqNLnt5Gypws9Plf8ph8zk/img.png)

<%@ page contentType="text/html; charset=UTF-8" buffer="5kb"%><% int totalBuffer = out.getBufferSize(); int remainBuffer = out.getBufferSize(); int useBuffer = totalBuffer - remainBuffer;%><h1>Out example1</h1><b>현재 페이지의 버퍼 상태</b><br> 출력 buffer 전체 크기 : <%=totalBuffer%><p/> 남은 buffer 크기 : <%=totalBuffer%><p/> 사용 buffer 크기 : <%=useBuffer%><p/>

---

session, application, pageContext
\- 실행되는 페이징지의 외부환경정보(context)와 관련된 내부 객체들이다.
\- session은 요청에 관한 Context를 제공한다.
\- application은 서블릿 Context를 제공한다.
\- pageContext는 jsp 페이지 자체의 Context를 제공한다.

session
\- 세션은 요청을 시도한 특정클라이언트와 다른 클라이언트와 구별하여
각각의 클라이언트에 대한 정보를 지속적으로 관리할 수 있다.

![img](https://blog.kakaocdn.net/dn/bBFfL0/btrCGVPjAOz/IhzNDyqYychQxc6LNgjTXK/img.png)

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<form method = "post" action = "session.jsp">
아이디 : <input name=id><p/>
비밀번호 : <input type=password name='pwd'><p/>
<button>로그인</button>
</form>
</body>
</html>
```

![img](https://blog.kakaocdn.net/dn/sbYQy/btrCH36pLHk/pknzjqSdi4yL2LO7L4Ykqk/img.png)

```
<%@ page contentType="text/html; charset=UTF-8" %>
 <%
 	String id = request.getParameter("id");
 	String pwd = request.getParameter("pwd]");
 	session.setAttribute("idKey", id);
 	session.setMaxInactiveInterval(60*5);

 %>
<!DOCTYPE html>
<html>
<head>
  <title>homepage</title>
  <meta charset="utf-8">
</head>
<body>
<jsp:include page="/menu/top.jsp"/>
<div class="container">
<h1 class="col-sm-offset-2 col-sm-10">Session Example1</h1>
<form class="form-horizontal"
      action="session_1.jsp"
      method="post"
      >

  <div class="form-group">
    <label class="control-label col-sm-2" for="season">좋아하는 계절</label>
    <div class="col-sm-6">
      <input type="radio" name="season" id="season" value="봄" class="form-control">봄<p/>
      <input type="radio" name="season" id="season" value="여름" class="form-control">여름<p/>
      <input type="radio" name="season" id="season" value="가을" class="form-control">가을<p/>
      <input type="radio" name="season" id="season" value="겨울" class="form-control">겨울<p/>
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-sm-2" for="season">좋아하는 과일</label>
    <div class="col-sm-6">
      <input type="radio" name="fruit" id="fruit" value="watermelon" class="form-control">수박<p/>
      <input type="radio" name="fruit" id="fruit" value="melon" class="form-control">멜론<p/>
      <input type="radio" name="fruit" id="fruit" value="apple" class="form-control">사과<p/>
      <input type="radio" name="fruit" id="fruit" value="orange" class="form-control">오렌지<p/>
    </div>
  </div>

   <div class="form-group">
   <div class="col-sm-offset-2 col-sm-5">
    <button class="btn">결과 보기</button>
    <button type="reset" class="btn">취소</button>
   </div>
 </div>
</form>
</div>
</body>
</html>
```

![img](https://blog.kakaocdn.net/dn/boHif2/btrCHnR63jE/Mt7KNGDKp1KNRHuFfynDy0/img.png)

![img](https://blog.kakaocdn.net/dn/dHcscC/btrCHD8o1u0/ekVkkKoXkCAxst9xms8nRk/img.png)

```
<%@ page contentType="text/html; charset=UTF-8" %>
<%
	request.setCharacterEncoding("utf-8");
	String season = request.getParameter("season");
	String fruit = request.getParameter("fruit");
	String id = (String)session.getAttribute("idKey");
	String sessionId = session.getId();
	int intervalTime = session.getMaxInactiveInterval();
	if(id != null){

%>
<h1>Session Example</h1>
<b><%=id %><b>님이 좋아하는 계절과 과일은<p/>
<b><%=season %></b>과 <b><%=fruit %></b>입니다.<p/>
세션 ID : <%=sessionId%><p/>
세션 유지 시간 : <%=intervalTime %>초<p/>

<%
	session.invalidate();

	}else{
		out.println("세션의 시간이 경과를 하였거나 다른 이유로 연결을 할 수 가 없습니다.");
	}
%>
```

---

application
\- 서블릿 또는 어플리케이션 외부 환경 정보(contenxt)를 나타낸다
\- 서버의 정보와 서버측 자원에 대한 정보를 얻을 수 있다.

\- javax.servlet.ServletContext 인터페이스의 구현 객체

\- 서블릿이 서블릿 컨테이너(Tomcat)에서 실행 될 때의 환경 정보를 저장

\- 절대 경로 추출시 JSP 형식

String upDir = "/pds/storage";

upDir = application.getRealPath(upDir);

\>>> application.jsp

<%@ page contentType="text/html;charset=UTF-8"%>

<%

String serverInfo = application.getServerInfo();

String mimeType = application.getMimeType("request1.html");

String realPath = application.getRealPath("/");

application.log("application 내부 객체 로그 테스트");

%>

<h1>Application Example1</h1>

서블릿 컨테이너의 이름과 버전 :<%=serverInfo%><p />

request1.html의 MIME Type :<%=mimeType%><p />

로컬 파일 시스템 경로 :<%=realPath%>

![img](https://blog.kakaocdn.net/dn/AcOUY/btrCGR7nVSI/EMbyYNUyUrKbQQu03nIsWK/img.png)

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	String serverInfo = application.getServerInfo();
	String mimeType = application.getMimeType("request.jsp");
	String realPath = application.getRealPath("/");
	application.log("application 내부 객체 로그 테스트");
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>Application Example1</h1>
서블릿 컨테이너의 이름과 버전 :<%=serverInfo%><p />
request1.html의 MIME Type :<%=mimeType%><p />
로컬 파일 시스템 경로 :<%=realPath%>
</body>
</html>
```

---

pageContext
\- Jsp페이지의 Context를 나타낸다.
\- pageContext 내부객체를 통해서 다른 내부객체를 접근할 수 있다.
\- out내부객체 가져오는 방법
JspWriter pageOut = pageContext.getOut();
\- javax.servlet.jsp.PageContext 클래스 타입으로 제공된다.

![img](https://blog.kakaocdn.net/dn/Hi9qM/btrCHPtYjTb/95GahRaIFjUCNTA4fpkcn1/img.png)

---

page, config
\- page 내부객체와 config내부객체를 통해서 jsp페이지가 변환된 서블릿관 관련되
내용에 접근할 수 있도록 하는 객체들이다.
page
\- Jsp페이지 그 자체를 나타내는 객체이다.
\- Jsp페이지에서 page객체는 this 키워드로 자기 자신을 참조한다.

\>>> page.jsp

<%@ page info = "study.co.kr"

contentType="text/html;charset=UTF-8"%>

<%

​ String pageInfo = this.getServletInfo();

%>

<h1>Page Example1</h1>

현재 페이지의 info값 : <%=pageInfo%>

---

config
\- javax.servlet.ServletConfig 클래스 타입의 내부 객체이다.
\- 서블릿이 초기화될 때 참조해야 할 다른 여러 정보를 가지고 있다가
전해준다.

![img](https://blog.kakaocdn.net/dn/pBhRg/btrCIGwlqBi/fTA6BqKSD6vyFVRt1uP79k/img.png)

exception내부객체
\- Jsp 페이지에서 발생한 예외를 처리하는 페이지를 지정한 경우 에러페이지에
전달되는 예외 객체이다.
\- page지시자 isErrorPage속성을 true로 지정한 Jsp페이지에서만 사용가능하다.

![img](https://blog.kakaocdn.net/dn/bT3wYe/btrCGR7rPPU/qofwn7K3kea95QQWrswBn0/img.png)

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" errorPage="exception2.jsp"%>
<%
	int one = 1;
	int zero = 0;
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1> Exception Example </h1>
one/zero = <%=one/zero %><p/>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isErrorPage="true"%>
<%
	String message = exception.getMessage();
	String objectMessage = exception.toString();
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
에러 메세지 : <b><%=message%></b><p/>
에러 실체의 클래스명과 에러 메세지 : <b><%=objectMessage%></b><p/>
</body>
</html>
```
